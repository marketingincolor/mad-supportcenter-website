(function(i){function Ab(Ta,U){function Y(){u=r.find(".slides");if(a.settings.shuffle){var b=u.children().sort(function(){return 0.5-Math.random()});u.empty().append(b)}u.children().each(function(e){var d={};d.properties={};A.push(i(this));if(i(this).data("image")){d.lazyImage=i(this).data("image");d.lazyImageLoaded=false}for(var g=0;g<i(this).children().length;g++){var h=i(this).children()[g];if(i(h).hasClass("thumbnail")||i(h).is("a")&&i(h).children("img.thumbnail").length)d.thumbnail=i(h).clone();
else d[i(h).attr("class")]=i(h)}if(!d.caption&&i(this).find(".caption").length)d.caption=i(this).find(".caption");if(!d.html&&i(this).find(".html").length)d.html=i(this).find(".html");if(a.settings.xmlSource){d.properties=y[e].properties;y[e]=d}else{for(g=0;g<Ba.length;g++){h=Ba[g];var c;if(a.settings.slideProperties)if(a.settings.slideProperties[e])c=a.settings.slideProperties[e][h];d.properties[h]||(d.properties[h]=c==undefined?a.settings[h]:c)}y.push(d)}});if(w){u.find("img.thumbnail").parent("a").css("display",
"none");u.find("img.thumbnail").css("display","none");window.onload=function(){u.find("img.thumbnail").parent("a").remove();u.find("img.thumbnail").remove()}}else{u.find("img.thumbnail").parent("a").remove();u.find("img.thumbnail").remove()}G=y.length;Bb()}function Bb(){r.addClass(a.settings.skin).css({width:a.settings.width,height:a.settings.height}).focus(function(){ta=true;r.addClass("focus")}).blur(function(){ta=false;r.hasClass("focus")&&r.removeClass("focus")});K=i('<div class="slider-main"></div>').appendTo(r);
if(i.browser.mozilla)r.addClass("mozilla");else if(i.browser.webkit)r.addClass("webkit");else if(i.browser.opera)r.addClass("opera");else if(i.browser.msie)if(parseInt(i.browser.version)==6)r.addClass("ie6");else if(parseInt(i.browser.version)==7)r.addClass("ie7");else if(parseInt(i.browser.version)==8)r.addClass("ie8");else parseInt(i.browser.version)==9&&r.addClass("ie9");m=i('<div class="slide-wrapper"></div>').append(u).appendTo(K).hover(function(){Z=true;if(a.settings.timerAnimation&&a.settings.timerToggle&&
N!="stopped"&&!L){var d=r.find(".timer-animation");w?d.css("filter",""):d.stop().animate({opacity:1},a.settings.timerFadeDuration)}if(ua&&a.settings.lightboxIconToggle){d=m.find(".lightbox-icon");w?d.css("filter",""):d.stop().animate({opacity:1},a.settings.lightboxIconFadeDuration)}a.settings.pauseSlideshowOnHover&&!J&&ga();ha&&a.settings.captionToggle&&fb();if(a.settings.slideArrows&&a.settings.slideArrowsToggle)w?r.find(".slide-arrows a").stop().show():r.find(".slide-arrows a").stop().animate({opacity:1},
a.settings.slideArrowsShowDuration);if(a.settings.slideshowControls&&a.settings.slideshowControlsToggle)w?r.find(".slideshow-controls").stop().show():r.find(".slideshow-controls").stop().animate({opacity:1},a.settings.slideshowControlsShowDuration);a.settings.autoToggle&&gb()},function(){Z=false;a.settings.autoToggle&&hb();if(a.settings.timerAnimation&&a.settings.timerToggle&&N!="stopped"&&!L){var d=r.find(".timer-animation");w?d.css("opacity",0):d.stop().animate({opacity:0},a.settings.timerFadeDuration)}if(ua&&
a.settings.lightboxIconToggle){d=m.find(".lightbox-icon");w?d.css("opacity",0):d.stop().animate({opacity:0},a.settings.lightboxIconFadeDuration)}a.settings.pauseSlideshowOnHover&&!na&&!Ua&&!J&&oa();ha&&a.settings.captionToggle&&Va();if(a.settings.slideArrows&&a.settings.slideArrowsToggle)w?r.find(".slide-arrows a").stop().hide():r.find(".slide-arrows a").stop().animate({opacity:0},a.settings.slideArrowsHideDuration);if(a.settings.slideshowControls&&a.settings.slideshowControlsToggle)w?r.find(".slideshow-controls").stop().hide():
r.find(".slideshow-controls").stop().animate({opacity:0},a.settings.slideshowControlsHideDuration)});a.settings.effectType=="swipe"&&i('<div class="swipeable-container"></div>').appendTo(m).append(u);u.find(".slide").each(function(d){var g=i(this),h=g.find("img.image");g=g.find(".caption");var c=y[d],f=c.properties;if(h.length){h.data("index",d);c.imagePath=h.attr("src")}if(g.length){d=parseFloat(f.captionBackgroundOpacity);h=f.captionBackgroundColor;f=i('<div class="caption-container"></div>').appendTo(g.parent());
f=i('<div class="wrapper"></div>').appendTo(f);i('<div class="background"></div>').css({opacity:d,"background-color":h}).appendTo(f);g.appendTo(f)}});u.find(".html video.video").each(function(){var d=i(this),g=d.parent();if(Cb){var h=d[0].outerHTML;d.remove();g.html(h);d=g.find("video");d[0].load()}d.hasClass("video-js")&&VideoJS(d.attr("id"),d.data("video"))});u.find(".html video.sublime-video").length&&window.sublimevideo&&sublimevideo.ready(function(){u.find(".html video.sublime-video").each(function(){sublimevideo.prepare(i(this).attr("id"))})});
pa=a.settings.slideStart;var b=window.location.hash;if(b){b=b.substring(1);var e=b.split("-");e=parseInt(e.pop());b=b.replace("-"+e,"");if(r.attr("id")==b&&e>=0&&e<=G-1)pa=e}a.settings.slideArrows&&Db();a.settings.slideButtons&&Eb();a.settings.shadow&&Fb();if(a.settings.thumbnailType=="scroller"||a.settings.thumbnailType=="tooltipAndScroller")Gb();a.settings.slideshowControls&&Hb();a.settings.keyboardNavigation&&Ib();a.settings.lightbox&&r.find("a[rel^='slider-lightbox']").prettyPhoto({social_tools:"",
deeplinking:false,overlay_gallery:false,theme:a.settings.lightboxTheme,opacity:a.settings.lightboxOpacity,openLightbox:function(){if(!na){na=true;r.blur();J||ga()}},callback:function(){if(na){na=false;r.focus();J||oa()}}});if((a.settings.thumbnailType=="scroller"||a.settings.thumbnailType=="tooltipAndScroller")&&(a.settings.thumbnailMouseScroll||a.settings.thumbnailTooltip||a.settings.thumbnailScrollbar)||a.settings.autoToggle)i(document).bind("mousemove",function(d){$=d.pageX;aa=d.pageY;Wa=$+aa});
ia="none";Xa();qa(pa);i(window).resize(Xa)}function Xa(){var b=0,e=0;a.settings.aspectRatio!=-1&&r.css("height",r.width()/a.settings.aspectRatio);if((a.settings.thumbnailType=="scroller"||a.settings.thumbnailType=="tooltipAndScroller")&&!a.settings.thumbnailScrollerOverlay)if(a.settings.thumbnailOrientation=="horizontal")K.css("height",r.height()-v.outerHeight(true));else a.settings.thumbnailOrientation=="vertical"&&K.css("width",r.width()-v.outerWidth(true));if(a.settings.shadow){var d=K.find(".shadow");
if(K.width()>=400){d.css("display","block");var g=d.find(".shadow-middle"),h=d.find(".shadow-left").width()+d.find(".shadow-right").width(),c=parseInt(d.css("height"))+parseInt(d.css("margin-top"));d.css("width",K.width());g.css("width",d.width()-h);b=c>b?c:b}else d.css("display","none")}if(a.settings.slideButtons){d=K.find(".slide-buttons");g=d.find("buttons-middle");h=g.find("buttons-inner");c=parseInt(d.css("height"))+parseInt(d.css("margin-top"));if(a.settings.slideButtonsContainerCenter){var f=
(K.width()-d.width())/2;d.css("left",f)}if(a.settings.slideButtonsCenter){f=(g.width()-h.width())/2;h.css("left",f)}b=c>b?c:b}ib=b;b+=parseInt(m.css("border-top-width"))+parseInt(m.css("border-bottom-width"));e+=parseInt(m.css("border-left-width"))+parseInt(m.css("border-right-width"));m.css({height:K.height()-b,width:K.width()-e});jb=m.width();kb=m.height();u.find(".slide").each(function(j){var t=i(this),l=t.find("img.image"),p=y[j].properties.alignType;if(l.length)if(l[0].complete||l[0].readyState==
"complete")ca(l,p);else{l.css("visibility","hidden");l.load(function(){l.css("visibility","");ca(l,p)})}if(a.settings.effectType=="swipe"){var s=q!=-1?q:pa;if(a.settings.swipeOrientation=="horizontal"){u.css("left",-s*(m.width()+a.settings.swipeSlideDistance));t.css("left",j*(m.width()+a.settings.swipeSlideDistance))}else if(a.settings.swipeOrientation=="vertical"){u.css("top",-s*(m.height()+a.settings.swipeSlideDistance));t.css("top",j*(m.height()+a.settings.swipeSlideDistance))}}});if((a.settings.thumbnailType==
"tooltipAndScroller"||a.settings.thumbnailType=="scroller")&&a.settings.scaleType!="proportionalFit"){Ya();va();a.settings.thumbnailMouseScroll&&wa()}b={type:"doSliderLayout"};i.isFunction(a.settings.doSliderLayout)&&a.settings.doSliderLayout.call(this,b)}function ca(b,e){if(!b.data("init")){b.data("init",true);b.data("width",b.width());b.data("height",b.height());b.data("state","loaded");a.settings.allowScaleUp||b.css({maxWidth:b.data("width"),maxHeight:b.data("height")})}switch(a.settings.scaleType){case "exactFit":b.css({width:"100%",
height:"100%"});break;case "insideFit":b.width()/b.height()>=m.width()/m.height()?b.css({width:"100%",height:"auto"}):b.css({width:"auto",height:"100%"});break;case "outsideFit":b.width()/b.height()<=m.width()/m.height()?b.css({width:"100%",height:"auto"}):b.css({width:"auto",height:"100%"});break;case "proportionalFit":if(b.data("index")==q&&(b[0].complete||b[0].readyState=="complete")){m.css("width",jb);m.css("height",kb);b.css({width:"100%",height:"auto"});m.css("height",b.height());K.css("height",
m.outerHeight(true)+ib);if(a.settings.thumbnailType=="scroller"||a.settings.thumbnailType=="tooltipAndScroller"){a.settings.thumbnailOrientation=="horizontal"&&!a.settings.thumbnailScrollerOverlay?r.css("height",K.height()+v.outerHeight(true)):r.css("height",K.height());Ya();va();a.settings.thumbnailMouseScroll&&wa()}else r.css("height",K.height());if(C!=-1){var d=A[C].find("img.image"),g=y[C].properties.alignType;d.length&&lb(d,g)}}}lb(b,e)}function lb(b,e){var d=b.width(),g=b.height();switch(e){case "leftTop":b.css({left:0,
top:0});break;case "leftCenter":b.css({left:0,top:"50%","margin-top":-g*0.5});break;case "leftBottom":b.css({left:0,bottom:0});break;case "centerTop":b.css({left:"50%",top:0,"margin-left":-d*0.5});break;case "centerCenter":b.css({left:"50%",top:"50%","margin-left":-d*0.5,"margin-top":-g*0.5});break;case "centerBottom":b.css({left:"50%",bottom:0,"margin-left":-d*0.5});break;case "rightTop":b.css({right:0,top:0});break;case "rightCenter":b.css({right:0,top:"50%","margin-top":-g*0.5});break;case "rightBottom":b.css({right:0,
bottom:0});break;case "default":b.css({left:"50%",top:"50%","margin-left":-d*0.5,"margin-top":-g*0.5})}}function Db(){var b=i('<div class="slide-arrows"></div>').appendTo(m),e=i('<a class="previous"></a>').appendTo(b).click(function(){ia="previousButton";ja()});b=i('<a class="next"></a>').appendTo(b).click(function(){ia="nextButton";da()});if(a.settings.slideArrowsToggle)if(w){e.hide();b.hide()}else{e.css("opacity",0);b.css("opacity",0)}}function Hb(){var b=i('<div class="slideshow-controls"></div>').appendTo(m),
e=a.settings.slideshow?"pause":"play";N=a.settings.slideshow?"playing":"stopped";b.addClass(e).click(function(){if(N=="playing"||N=="paused")Ca();else N=="stopped"&&mb()});if(a.settings.slideshowControlsToggle)w?b.hide():b.css("opacity",0)}function Eb(){var b=G,e=i('<div class="slide-buttons"></div>').appendTo(K);i('<div class="left"></div>').appendTo(e);var d=i('<div class="middle"></div>').appendTo(e);i('<div class="right"></div>').appendTo(e);d=i('<div class="buttons-inner"></div>').appendTo(d);
for(var g=0;g<b;g++){var h=i('<a rel="'+g+'"></a>').appendTo(d);a.settings.slideButtonsNumber&&i('<div class="number">'+(g+1)+"</div>").appendTo(h);h.hover(function(){var c=parseInt(i(this).attr("rel"));i(this).hasClass("select")||i(this).addClass("over");if(y[c].properties.thumbnailType=="tooltip"||y[c].properties.thumbnailType=="tooltipAndScroller")Jb(c)},function(){var c=parseInt(i(this).attr("rel"));i(this).hasClass("select")||i(this).removeClass("over");if(y[c].properties.thumbnailType=="tooltip"||
y[c].properties.thumbnailType=="tooltipAndScroller")Kb()});h.click(function(){ia="button";qa(parseInt(i(this).attr("rel")))})}if(a.settings.slideButtonsToggle){w?e.hide():e.css("opacity",0);r.hover(function(){w?e.show():e.stop().animate({opacity:1},a.settings.slideButtonsShowDuration)},function(){w?e.hide():e.stop().animate({opacity:0},a.settings.slideButtonsHideDuration)})}}function Ib(){i(document).keydown(function(b){if(b.which==37&&(a.settings.keyboardNavigationOnFocusOnly&&ta||!a.settings.keyboardNavigationOnFocusOnly))ja();
else if(b.which==39&&(a.settings.keyboardNavigationOnFocusOnly&&ta||!a.settings.keyboardNavigationOnFocusOnly))da();else b.which==13&&ta&&A[q].children("a").length&&A[q].children("a").not(".thumbnail")[0].click()})}function Fb(){var b=i('<div class="shadow"></div>').appendTo(K);i('<div class="shadow-left"></div>').appendTo(b);i('<div class="shadow-middle"></div>').appendTo(b);i('<div class="shadow-right"></div>').appendTo(b)}function Jb(b){if(y[b].thumbnail){var e=y[b].thumbnail.is("a")?y[b].thumbnail.find("img"):
y[b].thumbnail,d=e.attr("src"),g=e.attr("alt");e=i('<div class="thumbnail-wrapper"></div>').appendTo(r.find(".buttons-inner"));var h=i('<div class="thumbnail"></div>').css({width:a.settings.thumbnailWidth,height:a.settings.thumbnailHeight}).appendTo(e);e.css({width:h.outerWidth(),height:h.outerHeight()});if(g){var c=i('<div class="caption"></div>').appendTo(h),f=i('<div class="background"></div>').appendTo(c);g=i('<div class="content">'+g+"</div>").appendTo(c);f=f.css("opacity");c.css("height",g.outerHeight(true));
a.settings.thumbnailCaptionPosition=="top"?c.css("top",0):c.css("bottom",0)}c=r.find(".buttons-inner a").eq(b);b=c.position().left-(e.outerWidth(true)-c.width())/2;c=c.position().top-e.outerHeight(true);w&&e.find("*").not(".background").css("filter","inherit");e.css({left:b,top:c-a.settings.thumbnailSlideAmount,opacity:0});i("<img/>").load(function(){h.css("background-image","url("+d+")")}).attr("src",d);if(w){e.animate({top:c,opacity:1},a.settings.thumbnailSlideDuration,a.settings.thumbnailSlideEasing);
e.find(".caption .background").animate({opacity:f},a.settings.thumbnailSlideDuration)}else e.animate({top:c,opacity:1},a.settings.thumbnailSlideDuration,a.settings.thumbnailSlideEasing)}}function Kb(){var b=r.find(".buttons-inner .thumbnail-wrapper");if(b.length){var e=b.find(".background");w&&e.animate({opacity:0},a.settings.thumbnailSlideDuration);b.animate({top:b.position().top-a.settings.thumbnailSlideAmount,opacity:0},a.settings.thumbnailSlideDuration,a.settings.thumbnailSlideEasing,function(){b.remove()})}}
function qa(b){if(b!=q){if(L)if(a.settings.overrideTransition)switch(nb){case "slide":A[q].stop(false,true);break;case "fade":A[q].stop(false,true);C!=-1&&A[C].stop(false,true);break;case "slice":ka.find(".slice").each(function(){clearTimeout(i(this).data("delay"));i(this).stop().remove()});ka.remove();C!=-1&&A[C].css({visibility:""});A[q].css("visibility","visible");M()}else if(a.settings.effectType!="swipe")return;a.settings.slideshow&&Da();if(ua){ua=false;var e=m.find(".lightbox-icon");w?e.remove():
e.stop().animate({opacity:0},a.settings.lightboxIconFadeDuration,function(){e.remove()})}if(xa){xa.leaveVideo();Ua=false}L=true;C=q;q=b;if(q!=ea)if(ha&&a.settings.effectType!="swipe"){ha=false;Va();ya&&clearTimeout(ya)}var d=y[b],g=A[b].find("img.image");if(d.lazyImage&&!d.lazyImageLoaded){var h=i('<img class="image"/>').attr("src",y[b].lazyImage);g.attr("alt")&&h.attr("alt",g.attr("alt"));g.attr("title")&&h.attr("title",g.attr("title"));h.data("index",b);if(g.length){h.prependTo(g.parent());g.remove()}else h.prependTo(A[b]);
g=h;d.imagePath=g.attr("src");d.lazyImageLoaded=true}if(g.length&&(g.data("state")!="loaded"||a.settings.scaleType=="proportionalFit")){var c=d.properties.alignType;if(a.settings.effectType=="swipe"){g.css("visibility","hidden");if(g[0].complete||g[0].readyState=="complete"){g.css("visibility","");ca(g,c)}else{ob(A[g.data("index")]);g.load(function(){g.css("visibility","");ca(g,c);Ea(A[g.data("index")])}).error(function(){Ea(A[g.data("index")]);L=false})}Fa()}else if(g[0].complete||g[0].readyState==
"complete"){ca(g,c);Fa()}else{ob(m);g.load(function(){ca(g,c);Ea(m);Fa()}).error(function(){Ea(m);L=false})}}else Fa();if(a.settings.slideButtons){h=r.find(".buttons-inner");h.find(".select").removeClass("select");h.find("a").eq(b).attr("class","select")}if(a.settings.thumbnailType=="scroller"||a.settings.thumbnailType=="tooltipAndScroller"){v.find(".thumbnail.select").removeClass("select");v.find(".thumbnail[data-index="+b+"]").removeClass("over").addClass("select");if(a.settings.thumbnailSync){b=
Math.floor(b/(V*F));b!=O&&fa(b)}}d={type:"slideOpen",index:q,data:d};i.isFunction(a.settings.slideOpen)&&a.settings.slideOpen.call(this,d)}}function da(){qa(q==G-1?0:q+1)}function ja(){qa(q==0?G-1:q-1)}function Lb(b){var e=[];if(!(G<=1)){if(G==2)if(b==0)e.push(1);else b==1&&e.push(0);else if(G>=3)e.push(b==0?G-1:b-1,b==G-1?0:b+1);for(b=0;b<e.length;b++){var d=e[b],g=y[d];if(g.lazyImage&&!g.lazyImageLoaded){var h=A[d].find("img.image"),c=i('<img class="image"/>').attr("src",g.lazyImage),f=g.properties.alignType;
h.attr("alt")&&c.attr("alt",h.attr("alt"));h.attr("title")&&c.attr("title",h.attr("title"));c.data("index",d);if(h.length){c.prependTo(h.parent());h.remove()}else c.prependTo(A[d]);h=c;g.lazyImageLoaded=true;g.imagePath=h.attr("src");h[0].complete||h[0].readyState=="complete"?ca(h,f):h.load(function(){ca(h,f)})}}}}function ob(b){if(!b.find(".preloader").length){var e=i('<div class="preloader"></div>').hide().appendTo(b),d=(b.outerWidth(true)-e.width())*0.5;b=(b.outerHeight(true)-e.height())*0.5;e.fadeIn(300);
e.css({left:d,top:b})}}function Ea(b){b.find(".preloader").stop().remove()}function la(b){b.preventDefault()}function Fa(){var b=y[q].properties.effectType;if(!a.settings.initialEffect&&pb){b="none";pb=false}if(a.settings.effectType=="swipe")b="swipe";else if(b=="random")b=ra(["slice","slide","fade"]);nb=b;var e={type:"transitionStart",index:q,data:y[q]};i.isFunction(a.settings.transitionStart)&&a.settings.transitionStart.call(this,e);switch(b){case "none":C!=-1&&A[C].css("visibility","");A[q].css("visibility",
"visible");M();break;case "fade":qb();break;case "slide":Mb();break;case "swipe":Nb();break;case "slice":Ob();break;default:qb()}}function qb(){var b=y[q].properties,e=A[q],d,g=parseInt(b.fadeInDuration),h=b.fadeInEasing,c=parseInt(b.fadeOutDuration);b=b.fadeOutEasing;w&&e.find("*").each(function(){i(this).hasClass(".caption-container")||i(this).parents(".caption-container").length==1||i(this).css("filter","inherit")});e.css({visibility:"visible",opacity:0}).animate({opacity:1},g,h,function(){e.css({opacity:""});
w&&e.find("*").each(function(){i(this).hasClass(".caption-container")||i(this).parents(".caption-container").length==1||i(this).css("filter","")});M()});if(C!=-1){d=A[C];w&&d.find("*").each(function(){i(this).hasClass(".caption-container")||i(this).parents(".caption-container").length==1||i(this).css("filter","inherit")});d.animate({opacity:0},c,b,function(){d.css({visibility:"",opacity:""});w&&d.find("*").each(function(){i(this).hasClass(".caption-container")||i(this).parents(".caption-container").length==
1||i(this).css("filter","")})})}}function Mb(){var b=y[q].properties,e=A[q],d,g=b.slideDirection,h=parseInt(b.slideDuration),c=b.slideEasing;b=b.slideLoop;if(C!=-1)d=A[C];if(g=="random")g=ra(["autoHorizontal","autoVertical","rightToLeft","leftToRight","topToBottom","bottomToTop"]);e.css("visibility","visible");var f={},j,t;switch(g){case "autoHorizontal":j="left";t=q==0&&C==G-1&&b?m.width():q==G-1&&C==0&&b?-m.width():q>C?m.width():-m.width();break;case "autoVertical":j="top";t=q==0&&C==G-1&&b?m.height():
q==G-1&&C==0&&b?-m.height():q>C?m.height():-m.height();break;case "rightToLeft":j="left";t=m.width();break;case "leftToRight":j="left";t=-m.width();break;case "topToBottom":j="top";t=-m.height();break;case "bottomToTop":j="top";t=m.height();break;default:j="left";t=q>C?m.width():-m.width()}e.css(j,t);f[j]=0;e.animate(f,{duration:h,easing:c,complete:function(){e.css({left:"",top:""});C!=-1&&d.css({visibility:"",left:"",top:""});M()},step:function(l){d&&d.css(j,l-t)}})}function Nb(){if(C==-1){u.css("overflow",
"visible").bind("dragstart",la).find(".slide").each(function(h){var c=i(this);if(a.settings.swipeOrientation=="horizontal")c.css({top:0,left:h*(m.width()+a.settings.swipeSlideDistance),visibility:"visible"});else a.settings.swipeOrientation=="vertical"&&c.css({top:h*(m.height()+a.settings.swipeSlideDistance),left:0,visibility:"visible"})});a.settings.swipeGrabCursor&&u.addClass("grab");var b,e,d=false,g=false;if(a.settings.swipeTouchDrag&&"ontouchstart"in window)g=d=true;if(!g&&a.settings.swipeMouseDrag)d=
true;if(a.settings.swipeOrientation=="horizontal"){u.css("left",-pa*(m.width()+a.settings.swipeSlideDistance));d&&u.swipe({threshold:a.settings.swipeThreshold,allowPageScroll:"vertical",swipeStatus:function(h,c,f,j){if(c=="start"){b=parseInt(u.css("left"));u.is(":animated")&&u.stop();h=i(h.target).closest("a");if(h.length){h.unbind("click",la).bind("click",la);h.has("rel")&&h.unbind("click.prettyphoto")}a.settings.swipeGrabCursor&&u.removeClass("grab").addClass("grabbing")}else if(c=="move"){e=q==
G-1&&f=="left"||q==0&&f=="right"?0.2:1;if(f=="left")u.css("left",b-j*e);else f=="right"&&u.css("left",b+j*e)}else if(c=="cancel"){u.stop().animate({left:-q*(m.width()+a.settings.swipeSlideDistance)},a.settings.swipeBackDuration,a.settings.swipeEasing,function(){L&&M()});a.settings.swipeGrabCursor&&u.removeClass("grabbing").addClass("grab")}},click:function(h){h=i(h.target).closest("a");if(h.length){h.unbind("click",la);h.attr("rel")&&i.prettyPhoto&&h.bind("click.prettyphoto",i.prettyPhoto.initialize)}},
swipeLeft:function(){q<G-1?da():u.stop().animate({left:-q*(m.width()+a.settings.swipeSlideDistance)},a.settings.swipeBackDuration,a.settings.swipeEasing,function(){L&&M()});a.settings.swipeGrabCursor&&u.removeClass("grabbing").addClass("grab")},swipeRight:function(){q>0?ja():u.stop().animate({left:-q*(m.width()+a.settings.swipeSlideDistance)},a.settings.swipeBackDuration,a.settings.swipeEasing,function(){L&&M()});a.settings.swipeGrabCursor&&u.removeClass("grabbing").addClass("grab")}})}else if(a.settings.swipeOrientation==
"vertical"){u.css("top",-pa*(m.height()+a.settings.swipeSlideDistance));d&&u.swipe({threshold:a.settings.swipeThreshold,allowPageScroll:"horizontal",swipeStatus:function(h,c,f,j){if(c=="start"){b=parseInt(u.css("top"));u.is(":animated")&&u.stop();h=i(h.target).closest("a");if(h.length){h.unbind("click",la).bind("click",la);h.has("rel")&&h.unbind("click.prettyphoto")}a.settings.swipeGrabCursor&&u.removeClass("grab").addClass("grabbing")}else if(c=="move"){e=q==G-1&&f=="up"||q==0&&f=="down"?0.2:1;if(f==
"up")u.css("top",b-j*e);else f=="down"&&u.css("top",b+j*e)}else if(c=="cancel"){u.stop().animate({top:-q*(m.height()+a.settings.swipeSlideDistance)},a.settings.swipeBackDuration,a.settings.swipeEasing,function(){L&&M()});a.settings.swipeGrabCursor&&u.removeClass("grabbing").addClass("grab")}},click:function(h){h=i(h.target).closest("a");if(h.length){h.unbind("click",la);h.attr("rel")&&i.prettyPhoto&&h.bind("click.prettyphoto",i.prettyPhoto.initialize)}},swipeUp:function(){q<G-1?da():u.stop().animate({top:-q*
(m.height()+a.settings.swipeSlideDistance)},a.settings.swipeBackDuration,a.settings.swipeEasing,function(){L&&M()});a.settings.swipeGrabCursor&&u.removeClass("grabbing").addClass("grab")},swipeDown:function(){q>0?ja():u.stop().animate({top:-q*(m.height()+a.settings.swipeSlideDistance)},a.settings.swipeBackDuration,a.settings.swipeEasing,function(){L&&M()});a.settings.swipeGrabCursor&&u.removeClass("grabbing").addClass("grab")}})}M()}else if(a.settings.swipeOrientation=="horizontal")u.stop().animate({left:-q*
(m.width()+a.settings.swipeSlideDistance)},a.settings.swipeDuration,a.settings.swipeEasing,function(){if(i.support.transition&&!u.is(":animated"))M();else i.support.transition||M()});else a.settings.swipeOrientation=="vertical"&&u.stop().animate({top:-q*(m.height()+a.settings.swipeSlideDistance)},a.settings.swipeDuration,a.settings.swipeEasing,function(){if(i.support.transition&&!u.is(":animated"))M();else i.support.transition||M()})}function Ob(){var b=y[q],e=b.properties,d=e.sliceEffectType,g=e.htmlDuringTransition,
h=parseInt(e.horizontalSlices),c=parseInt(e.verticalSlices),f=e.slicePattern,j=e.slicePoint,t=e.sliceStartPosition,l=parseFloat(e.sliceStartRatio),p=parseInt(e.sliceDuration),s=e.sliceEasing,k=parseInt(e.sliceDelay),o=e.sliceFade==true||effectType=="fade"?0:1,x=e.fadePreviousSlide,B=parseInt(e.fadePreviousSlideDuration),z=Math.floor(m.width()/h),H=Math.floor(m.height()/c);A[q].find("img.image").clone();var Za=A[q].clone(),rb=[];if(C!=-1&&x==true){var Ga=A[C];w&&Ga.find("*").each(function(){i(this).hasClass(".caption-container")||
i(this).parents(".caption-container").length==1||i(this).css("filter","inherit")});Ga.animate({opacity:0},B,function(){Ga.css({visibility:"",opacity:""});w&&Ga.find("*").each(function(){i(this).hasClass(".caption-container")||i(this).parents(".caption-container").length==1||i(this).css("filter","")})})}Za.css("visibility","visible").find(".caption-container").remove();g||Za.find(".html").remove();ka=i('<div class="slice-container"></div>').appendTo(m);e.slideMask&&ka.css("overflow","hidden");for(e=
0;e<h;e++)for(g=0;g<c;g++){x=i('<div class="slice"></div>').css({left:e*z,top:g*H,width:z,height:H,opacity:o,display:"none"}).data({hPos:e,vPos:g}).appendTo(ka);var Ha;if(b.html||b.imagePath)Ha=Za.clone();if(Ha){Ha.css({left:-(e*z),top:-(g*H),width:m.width(),height:m.height(),overflow:"hidden",position:"absolute"});x.html(Ha).css("overflow","hidden")}w&&x.find("*").each(function(){i(this).css("filter","inherit")});rb.push(x)}if(d=="random")d=ra(["scale","fade","width","height","slide"]);if(f=="random")f=
ra(["randomPattern","topToBottom","bottomToTop","leftToRight","rightToLeft","topLeftToBottomRight","topRightToBottomLeft","bottomLeftToTopRight","bottomRightToTopLeft","horizontalMarginToCenter","horizontalCenterToMargin","marginToCenter","verticalCenterToMargin","skipOneTopToBottom","skipOneBottomToTop","skipOneLeftToRight","skipOneRightToLeft","skipOneHorizontal","skipOneVertical","spiralMarginToCenterCW","spiralMarginToCenterCCW","spiralCenterToMarginCW","spiralCenterToMarginCCW"]);if(h==1&&f==
"skipOneHorizontal"||c==1&&f=="skipOneVertical")f="randomPattern";if(j=="random")j=ra(["leftTop","leftCenter","leftBottom","centerTop","centerCenter","centerBottom","rightTop","rightCenter","rightBottom"]);if(t=="random")t=ra(["left","right","top","bottom","leftTop","rightTop","leftBottom","rightBottom","horizontalAlternate","verticalAlternate"]);b=Pb(rb,f,h,c);Ia=b.length;for(e=0;e<Ia;e++)Qb(b[e],e,d,j,t,l,p,s,k)}function Qb(b,e,d,g,h,c,f,j,t){var l={},p={},s=parseInt(b.css("width")),k=parseInt(b.css("height")),
o=parseInt(b.css("left")),x=parseInt(b.css("top")),B,z;if(d=="scale"||d=="width"||d=="height")switch(g){case "centerCenter":z=x+k*0.5;B=o+s*0.5;break;case "rightCenter":z=x+k*0.5;B=o+s;break;case "leftCenter":z=x+k*0.5;B=o;break;case "centerTop":z=x;B=o+s*0.5;break;case "rightTop":z=x;B=o+s;break;case "leftTop":z=x;B=o;break;case "centerBottom":z=x+k;B=o+s*0.5;break;case "rightBottom":z=x+k;B=o+s;break;case "leftBottom":z=x+k;B=o;break;default:z=x+k*0.5;B=o+s*0.5}else if(d=="slide")switch(h){case "left":z=
x;B=o-s*c;break;case "right":z=x;B=o+s*c;break;case "top":z=x-k*c;B=o;break;case "bottom":z=x+k*c;B=o;break;case "leftTop":z=x-k*c;B=o-s*c;break;case "rightTop":z=x-k*c;B=o+s*c;break;case "leftBottom":z=x+k*c;B=o-s*c;break;case "rightBottom":z=x+k*c;B=o+s*c;break;case "horizontalAlternate":z=x;B=o+s*c*(e%2==0?1:-1);break;case "verticalAlternate":z=x+k*c*(e%2==0?1:-1);B=o;break;default:z=x;B=o-s*c}switch(d){case "fade":p={opacity:1};break;case "scale":l={width:0,height:0,left:B,top:z};p={width:s,height:k,
left:o,top:x,opacity:1};break;case "width":l={width:0,left:B};p={width:s,left:o,opacity:1};break;case "height":l={height:0,top:z};p={height:k,top:x,opacity:1};break;case "slide":l={left:B,top:z};p={left:o,top:x,opacity:1};break;default:p={opacity:1}}var H=setTimeout(function(){b.css(l).css("display","block").data("delay",H).animate(p,f,j,function(){Ia--;if(Ia==0){ka.find(".slice").each(function(){i(this).remove();w&&i(this).find("*").each(function(){i(this).css("filter","inherit")})});ka.remove();
C!=-1&&A[C].css({visibility:""});A[q].css("visibility","visible");M()}})},e*t)}function M(){var b=y[q],e=parseInt(b.properties.captionDelay);L=false;if(a.settings.slideshow&&N!="stopped")if(!a.settings.slideshowLoop&&q==G-1)Ca();else{Ja();if(a.settings.pauseSlideshowOnHover&&Z||J)ga()}if(q!=ea){if(ha&&a.settings.effectType=="swipe"){ha=false;Va();ya&&clearTimeout(ya)}if(b.caption){ha=true;ya=setTimeout(function(){if(!a.settings.captionToggle||a.settings.captionToggle&&Z)fb()},e)}else ea=-1}a.settings.preloadNearbyImages&&
Lb(q);C!=-1&&A[C].removeClass("active");A[q].addClass("active");var d=A[q].children('a[rel^="slider-lightbox"]');if(d.length&&a.settings.lightboxIcon){ua=true;e=d.attr("href");var g;e=e.indexOf("iframe=true")!=-1||e.indexOf("ajax=true")!=-1||e.indexOf("custom=true")!=-1?"link":e.indexOf("youtube.com")!=-1||e.indexOf("youtu.be")!=-1||e.indexOf("vimeo.com")!=-1?"video":"image";g=i('<div class="lightbox-icon"></div>').appendTo(m);if(e=="video")g.addClass("play");else if(e=="link")g.addClass("hyperlink");
else e=="image"&&g.addClass("magnifying");if(a.settings.lightboxIconToggle&&!Z)g.css("opacity",0);else w||g.css({opacity:0}).stop().animate({opacity:1},a.settings.lightboxIconFadeDuration);g.click(function(){d.trigger("click")})}if(i.fn.videoController&&A[q].find(".video").length){xa=A[q].find(".video").videoController({reachVideoAction:a.settings.reachVideoAction,leaveVideoAction:a.settings.leaveVideoAction,start:function(){if(a.settings.videoPlayAction=="stopSlideshow"&&!J)Da();else a.settings.videoPlayAction==
"pauseSlideshow"&&!J&&ga()},play:function(){Ua=true;if(a.settings.videoPlayAction=="stopSlideshow"&&!J)Da();else a.settings.videoPlayAction=="pauseSlideshow"&&!J&&ga()},pause:function(){if(a.settings.videoPauseAction=="startSlideshow"&&!J)Ja();else a.settings.videoPauseAction=="resumeSlideshow"&&!J&&oa()},end:function(){if(a.settings.videoEndAction=="resetVideo")xa.stopVideo();else if(a.settings.videoEndAction=="startSlideshow"&&!J)Ja();else if(a.settings.videoEndAction=="resumeSlideshow"&&!J)oa();
else a.settings.videoEndAction=="nextSlide"&&da()},fullscreenchange:function(){if(i.browser.msie)if(i("body").hasClass("vjs-full-window")){a.settings.timerAnimation&&r.find(".timer-animation").css("visibility","hidden");a.settings.slideArrows&&m.find(".slide-arrows").css("visibility","hidden");a.settings.slideButtons&&r.find(".slide-buttons").css("visibility","hidden");a.settings.slideshowControls&&m.find(".slideshow-controls").css("visibility","hidden");a.settings.lightboxIcon&&m.find(".lightbox-icon").css("visibility",
"hidden");if(a.settings.thumbnailType=="scroller"||a.settings.thumbnailType=="tooltipAndScroller")r.find(".thumbnail-scroller").css("visibility","hidden")}else{a.settings.timerAnimation&&r.find(".timer-animation").css("visibility","visible");a.settings.slideArrows&&m.find(".slide-arrows").css("visibility","visible");a.settings.slideButtons&&r.find(".slide-buttons").css("visibility","visible");a.settings.slideshowControls&&m.find(".slideshow-controls").css("visibility","visible");a.settings.lightboxIcon&&
m.find(".lightbox-icon").css("visibility","visible");if(a.settings.thumbnailType=="scroller"||a.settings.thumbnailType=="tooltipAndScroller")r.find(".thumbnail-scroller").css("visibility","visible")}}});xa.reachVideo()}b={type:"transitionComplete",index:q,data:b};i.isFunction(a.settings.transitionComplete)&&a.settings.transitionComplete.call(this,b)}function fb(){ea=q;var b=y[ea].properties,e=b.captionPosition,d=za(b.captionSize),g=za(b.captionWidth),h=za(b.captionHeight),c=za(b.captionLeft),f=za(b.captionTop),
j=b.captionShowEffect,t=parseInt(b.captionShowEffectDuration),l=b.captionShowEffectEasing,p=b.captionShowSlideDirection;g=e=="custom"?g:"100%";h=e=="custom"?h:"100%";c=e=="custom"?c:0;f=e=="custom"?f:0;var s=A[q].find(".caption-container"),k=s.find(".wrapper");k.find(".background");k.find(".caption");parseFloat(b.captionBackgroundOpacity);b=b.captionBackgroundColor;var o=j=="fade"?0:d;switch(e){case "left":s.css({width:d,height:h,left:c,top:f});p=="auto"&&k.css({width:d,height:h,left:-o,top:0});break;
case "right":s.css({width:d,height:h,right:c,top:f});p=="auto"&&k.css({width:d,height:h,left:o,top:0});break;case "top":s.css({width:g,height:d,left:c,top:f});p=="auto"&&k.css({width:g,height:d,left:0,top:-o});break;case "bottom":s.css({width:g,height:d,left:c,bottom:f});p=="auto"&&k.css({width:g,height:d,left:0,top:o});break;case "custom":s.css({width:g,height:h,left:c,top:f});k.css({width:g,height:h,left:0,top:0});break;case "default":s.css({width:g,height:d,left:c,bottom:f});p=="auto"&&k.css({width:g,
height:d,left:0,top:o})}if(j=="fade")w?s.css("visibility","visible"):k.stop().css({opacity:0}).animate({opacity:1},t,l);else{w?s.css("visibility","visible"):k.stop().css({opacity:1});e=="custom"&&s.css({width:g,height:h,left:c,top:f});if(p=="topToBottom")k.css({width:g,height:h,left:0,top:-h});else if(p=="bottomToTop")k.css({width:g,height:h,left:0,top:h});else if(p=="leftToRight")k.css({width:g,height:h,left:-g,top:0});else p=="rightToLeft"&&k.css({width:g,height:h,left:g,top:0});i.browser.msie&&
i.browser.version=="6.0"&&k.css("background-color",b);k.stop().animate({top:0,left:0},t,l)}}function Va(){if(ea!=-1){var b=A[ea].find(".caption-container"),e=b.find(".wrapper");e.find(".background");e.find(".caption");var d=y[ea].properties,g=d.captionPosition,h=d.captionHideEffect,c=parseInt(d.captionHideEffectDuration),f=d.captionHideEffectEasing;d=d.captionHideSlideDirection;if(h=="fade")w?b.css("visibility","hidden"):e.stop().animate({opacity:0},c,f);else if(d=="topToBottom")e.animate({top:e.height()},
c);else if(d=="bottomToTop")e.animate({top:-e.height()},c);else if(d=="leftToRight")e.animate({left:e.width()},c);else if(d=="rightToLeft")e.animate({left:-e.width()},c);else if(d=="auto")switch(g){case "left":e.stop().animate({left:-e.width()},c);break;case "right":e.stop().animate({left:e.width()},c);break;case "top":e.stop().animate({top:-e.height()},c);break;case "bottom":e.stop().animate({top:e.height()},c);break;case "custom":e.stop().animate({top:e.height()},c);break;case "default":e.stop().animate({top:e.height()},
c)}}}function Ja(){var b=y[q].properties.slideshowDelay;N="playing";a.settings.timerAnimation&&Rb(b);Ka=0;La=(new Date).getTime();W&&clearTimeout(W);W=setTimeout(function(){ia="slideshow";if(a.settings.slideshowDirection=="next")da();else a.settings.slideshowDirection=="previous"&&ja()},b)}function mb(){if(!a.settings.slideshow)a.settings.slideshow=true;r.find(".slideshow-controls").removeClass("play").addClass("pause");Ja()}function Ca(){r.find(".slideshow-controls").removeClass("pause").addClass("play");
N="stopped";Da()}function Da(){W&&clearTimeout(W);a.settings.timerAnimation&&Sb()}function ga(){if(a.settings.slideshow&&N=="playing"&&!L){W&&clearTimeout(W);N="paused";Ka+=(new Date).getTime()-La}}function oa(){if(a.settings.slideshow&&N=="paused"&&!L){var b=y[q].properties.slideshowDelay;N="playing";La=(new Date).getTime();W&&clearTimeout(W);W=setTimeout(function(){if(a.settings.slideshowDirection=="next")da();else a.settings.slideshowDirection=="previous"&&ja()},b-Ka)}}function Rb(b){var e=document.createElement("canvas"),
d=Math.max(a.settings.timerStrokeWidth1,a.settings.timerStrokeWidth2)+a.settings.timerRadius*2,g=d/2,h=Math.PI/180,c=0,f,j,t=a.settings.timerStrokeOpacity1,l=a.settings.timerStrokeOpacity2,p=sa(a.settings.timerStrokeColor1).red,s=sa(a.settings.timerStrokeColor1).green,k=sa(a.settings.timerStrokeColor1).blue,o=sa(a.settings.timerStrokeColor2).red,x=sa(a.settings.timerStrokeColor2).green,B=sa(a.settings.timerStrokeColor2).blue;e.width=e.height=d;var z=i('<div class="timer-animation"></div>').css({width:d,
height:d}).appendTo(m);i(e).appendTo(z);if(a.settings.timerAnimationControls){i('<div class="timer-animation-controls"></div>').appendTo(z);J?z.addClass("play"):z.addClass("pause");z.click(function(){if(J){if(J){J=false;z.removeClass("play").addClass("pause");a.settings.pauseSlideshowOnHover&&Z||oa()}}else{J=true;z.removeClass("pause").addClass("play");a.settings.pauseSlideshowOnHover&&Z||ga()}})}if(a.settings.timerToggle&&!Z)z.css("opacity",0);else w||z.css({opacity:0}).stop().animate({opacity:1},
a.settings.timerFadeDuration);var H;if(e.getContext)H=e.getContext("2d");else if(typeof G_vmlCanvasManager!="undefined"&&w)H=G_vmlCanvasManager.initElement(e).getContext("2d");else return;H.beginPath();H.lineWidth=a.settings.timerStrokeWidth1;H.strokeStyle="rgba("+p+", "+s+", "+k+", "+t+")";H.arc(g,g,a.settings.timerRadius,0,2*Math.PI,false);H.stroke();$a=setInterval(function(){if(c<=360&&!(a.settings.pauseSlideshowOnHover&&Z||na||J||N=="paused")){f=(new Date).getTime();j=f-La;c=(Ka+j)/b*360+1;if(c>
360)c=360;e.width=e.width;H.beginPath();H.lineWidth=a.settings.timerStrokeWidth1;H.strokeStyle="rgba("+p+", "+s+", "+k+", "+t+")";H.arc(g,g,a.settings.timerRadius,0,2*Math.PI,false);H.stroke();H.beginPath();H.lineWidth=a.settings.timerStrokeWidth2;H.strokeStyle="rgba("+o+", "+x+", "+B+", "+l+")";H.arc(g,g,a.settings.timerRadius,0,c*h,false);H.stroke()}},20)}function Sb(){$a&&clearInterval($a);var b=m.find(".timer-animation");if(b)w?b.remove():b.stop().animate({opacity:0},a.settings.timerFadeDuration,
function(){b.remove()})}function Gb(){v=i('<div class="thumbnail-scroller"></div>').appendTo(r);I=i('<div class="visible-container"></div>').appendTo(v);P=i('<ul class="container"></ul>').appendTo(I);a.settings.thumbnailOrientation=="horizontal"?v.addClass("horizontal"):v.addClass("vertical");a.settings.thumbnailScrollerOverlay&&v.addClass("overlay");for(var b=0;b<G;b++)if(y[b].thumbnail&&(y[b].properties.thumbnailType=="scroller"||y[b].properties.thumbnailType=="tooltipAndScroller")){var e=y[b].thumbnail.is("a"),
d=e?y[b].thumbnail.find("img").removeClass("thumbnail"):y[b].thumbnail,g=d.attr("src"),h=d.attr("alt");d.attr("title");var c=i('<li class="thumbnail-wrapper"></li>').appendTo(P);if(e){e=y[b].thumbnail;e.addClass("thumbnail").css({width:a.settings.thumbnailWidth,height:a.settings.thumbnailHeight}).attr("data-index",b).appendTo(c);if(d[0].complete||d[0].readyState=="complete"){d.css("margin-left",(a.settings.thumbnailWidth-d.width())*0.5);d.css("margin-top",(a.settings.thumbnailHeight-d.height())*0.5);
e.css("background-image","none")}else d.load(function(){i(this).css("margin-left",(a.settings.thumbnailWidth-i(this).width())*0.5);i(this).css("margin-top",(a.settings.thumbnailHeight-i(this).height())*0.5);i(this).parent().css("background-image","none")})}else{e=i('<a class="thumbnail"></a>').css({"background-image":"url("+g+")",width:a.settings.thumbnailWidth,height:a.settings.thumbnailHeight}).attr("data-index",b).appendTo(c);y[b].thumbnail.attr("title")&&e.attr("title",y[b].thumbnail.attr("title"))}c.css({width:e.outerWidth(),
height:e.outerHeight()});F=a.settings.thumbnailLayers==-1||a.settings.thumbnailLayers*a.settings.maximumVisibleThumbnails>G?Math.ceil(G/a.settings.maximumVisibleThumbnails):a.settings.thumbnailLayers;if(a.settings.thumbnailOrientation=="horizontal"){c.css("left",Math.floor(Q/F)*c.outerWidth(true));c.css("top",Q%F*c.outerHeight(true))}else{c.css("left",Q%F*c.outerWidth(true));c.css("top",Math.floor(Q/F)*c.outerHeight(true))}if(h){d=i('<div class="caption"></div>').appendTo(e);g=i('<div class="background"></div>').appendTo(d);
h=i('<div class="content">'+h+"</div>").appendTo(d);d.css("height",h.outerHeight(true));a.settings.thumbnailCaptionPosition=="top"?d.css({top:0}):d.css({bottom:0});if(a.settings.thumbnailCaptionToggle)if(a.settings.thumbnailCaptionEffect=="slide")a.settings.thumbnailCaptionPosition=="top"?d.css({top:-d.outerHeight(true)}):d.css({bottom:-d.outerHeight(true)});else if(w){g.data("opacity",g.css("opacity"));g.css("opacity",0);h.css("opacity",0)}else d.css("opacity",0)}c=c.children('a[rel^="slider-lightbox"]');
h=A[b].children('a[rel^="slider-lightbox"]');d=c.length&&a.settings.lightboxIcon;g=h.length&&a.settings.thumbnailLightboxIcon;if(d||g){c=d?c.attr("href"):h.attr("href");c=c.indexOf("iframe=true")!=-1||c.indexOf("ajax=true")!=-1||c.indexOf("custom=true")!=-1?"link":c.indexOf("youtube.com")!=-1||c.indexOf("youtu.be")!=-1||c.indexOf("vimeo.com")!=-1?"video":"image";h=i('<div class="lightbox-icon"></div>').appendTo(e);if(c=="video")h.addClass("play");else if(c=="link")h.addClass("hyperlink");else c==
"image"&&h.addClass("magnifying");a.settings.thumbnailLightboxIconToggle&&h.css("opacity",0)}e.hover(function(){i(this).hasClass("select")||i(this).addClass("over");var f=i(this).data("index");if(a.settings.thumbnailCaptionToggle){var j=i(this).children(".caption"),t=j.children(".background"),l=j.children(".content"),p=t.data("opacity");if(a.settings.thumbnailCaptionEffect=="slide")a.settings.thumbnailCaptionPosition=="top"?j.stop().animate({top:0},a.settings.thumbnailCaptionShowDuration,a.settings.thumbnailCaptionEasing):
j.stop().animate({bottom:0},a.settings.thumbnailCaptionShowDuration,a.settings.thumbnailCaptionEasing);else if(w){t.stop().animate({opacity:p},a.settings.thumbnailCaptionShowDuration,a.settings.thumbnailCaptionEasing);l.stop().animate({opacity:1},a.settings.thumbnailCaptionShowDuration,a.settings.thumbnailCaptionEasing)}else j.stop().animate({opacity:1},a.settings.thumbnailCaptionShowDuration,a.settings.thumbnailCaptionEasing)}if(a.settings.thumbnailLightboxIconToggle){j=i(this).children(".lightbox-icon");
w?j.css("filter",""):j.stop().animate({opacity:1},a.settings.lightboxIconFadeDuration)}a.settings.thumbnailTooltip&&Tb(f);f={type:"thumbnailMouseOver",index:f};i.isFunction(a.settings.thumbnailMouseOver)&&a.settings.thumbnailMouseOver.call(this,f)},function(){i(this).hasClass("select")||i(this).removeClass("over");var f=i(this).data("index");if(a.settings.thumbnailCaptionToggle){var j=i(this).children(".caption"),t=j.children(".background"),l=j.children(".content");if(a.settings.thumbnailCaptionEffect==
"slide")a.settings.thumbnailCaptionPosition=="top"?j.stop().animate({top:-j.outerHeight(true)},a.settings.thumbnailCaptionHideDuration,a.settings.thumbnailCaptionEasing):j.stop().animate({bottom:-j.outerHeight(true)},a.settings.thumbnailCaptionHideDuration,a.settings.thumbnailCaptionEasing);else if(w){t.stop().animate({opacity:0},a.settings.thumbnailCaptionHideDuration,a.settings.thumbnailCaptionEasing);l.stop().animate({opacity:0},a.settings.thumbnailCaptionHideDuration,a.settings.thumbnailCaptionEasing)}else j.stop().animate({opacity:0},
a.settings.thumbnailCaptionHideDuration,a.settings.thumbnailCaptionEasing)}if(a.settings.thumbnailLightboxIconToggle){j=i(this).children(".lightbox-icon");w?j.css("opacity",0):j.stop().animate({opacity:0},a.settings.lightboxIconFadeDuration)}a.settings.thumbnailTooltip&&Ub(f);f={type:"thumbnailMouseOut",index:f};i.isFunction(a.settings.thumbnailMouseOut)&&a.settings.thumbnailMouseOut.call(this,f)});e.click(function(){var f=i(this).data("index");ia="thumbnail";var j={type:"thumbnailClick",index:f};
i.isFunction(a.settings.thumbnailClick)&&a.settings.thumbnailClick.call(this,j);i(this).attr("href")||qa(f)});Q++}R=v.find(".thumbnail-wrapper").outerWidth(true);S=v.find(".thumbnail-wrapper").outerHeight(true);T=Math.ceil(Q/(a.settings.maximumVisibleThumbnails*F));if(a.settings.thumbnailOrientation=="horizontal"){v.css({height:S*F,width:R*a.settings.maximumVisibleThumbnails});I.css({height:S*F,width:R*a.settings.maximumVisibleThumbnails})}else{v.css({width:R*F,height:S*a.settings.maximumVisibleThumbnails});
I.css({width:R*F,height:S*a.settings.maximumVisibleThumbnails})}a.settings.thumbnailArrows&&Vb();a.settings.thumbnailButtons&&sb();a.settings.thumbnailScrollbar&&Wb();a.settings.thumbnailMouseScroll&&wa();a.settings.thumbnailMouseWheel&&tb();a.settings.thumbnailTooltip&&i('<div class="tooltip"><div class="content"></div></div>').hide().appendTo(i("body"));Ya();if(a.settings.thumbnailScrollerToggle){v.css({opacity:0});v.hover(function(){w?v.css("filter",""):v.stop().animate({opacity:1},a.settings.thumbnailScrollerShowDuration)},
function(){w?v.css("opacity",0):v.stop().animate({opacity:0},a.settings.thumbnailScrollerHideDuration)})}}function Ya(){if(a.settings.thumbnailOrientation=="horizontal"){var b=a.settings.thumbnailArrows?parseInt(v.css("paddingLeft"))+parseInt(v.css("paddingRight")):0;X=Math.ceil(Q/F)*R;V=a.settings.thumbnailScrollerResponsive?Math.max(a.settings.minimumVisibleThumbnails,Math.min(Math.ceil(Q/F),a.settings.maximumVisibleThumbnails,Math.floor((m.outerWidth()-b)/R))):Math.min(Q,a.settings.maximumVisibleThumbnails);
v.css("width",R*V);I.css("width",R*V)}else{b=a.settings.thumbnailArrows?parseInt(v.css("paddingTop"))+parseInt(v.css("paddingBottom")):0;X=Math.ceil(Q/F)*S;V=a.settings.thumbnailScrollerResponsive?Math.max(a.settings.minimumVisibleThumbnails,Math.min(Math.ceil(Q/F),a.settings.maximumVisibleThumbnails,Math.floor((m.outerHeight()-b)/S))):Math.min(Q,a.settings.maximumVisibleThumbnails);v.css("height",V*S);I.css("height",V*S)}if(a.settings.thumbnailScrollerCenter)if(a.settings.thumbnailOrientation=="horizontal")v.css("left",
(K.outerWidth()-v.outerWidth())/2);else a.settings.thumbnailOrientation=="vertical"&&v.css("top",(m.outerHeight()-v.outerHeight())/2);if(ub!=V){ub=V;T=Math.ceil(Q/(V*F));a.settings.thumbnailButtons&&a.settings.thumbnailScrollerResponsive&&sb();if(a.settings.thumbnailScrollbar&&a.settings.thumbnailScrollerResponsive)if(a.settings.thumbnailOrientation=="horizontal"){D.css("width",v.width());Ma.css("width",D.width()-thumbnailScrollerScrollbarEdgeSize);D.css("left",(v.outerWidth()-D.width())/2)}else{D.css("height",
v.height());Ma.css("height",D.height()-thumbnailScrollerScrollbarEdgeSize);D.css("top",(v.outerHeight()-D.height())/2)}fa(O)}}function Vb(){ba=i('<div class="arrows"></div>').appendTo(v);var b=i('<a class="previous"></a>').click(function(){vb()}).appendTo(ba),e=i('<a class="next"></a>').click(function(){wb()}).appendTo(ba);if(a.settings.thumbnailOrientation=="horizontal"){b.css({top:Math.round((S*F-b.height())/2)});e.css({top:Math.round((S*F-e.height())/2)})}else{b.css({left:Math.round((R*F-b.width())/
2)});e.css({left:Math.round((R*F-e.width())/2)})}if(a.settings.thumbnailArrowsToggle){i.browser.msie?ba.hide():ba.css("opacity",0);v.hover(function(){i.browser.msie?ba.show():ba.stop().animate({opacity:1},a.settings.thumbnailArrowsShowDuration)},function(){i.browser.msie?ba.hide():ba.stop().animate({opacity:0},a.settings.thumbnailArrowsHideDuration)})}}function sb(){if(!E){E=i('<div class="buttons"></div>').appendTo(v);if(a.settings.thumbnailButtonsToggle){w?E.hide():E.css("opacity",0);v.hover(function(){w?
E.show():E.stop().animate({opacity:1},a.settings.thumbnailButtonsShowDuration)},function(){w?E.hide():E.stop().animate({opacity:0},a.settings.thumbnailButtonsShowDuration)})}}if(T==1)E.empty();else if(E.find(".buttons a").length!=T&&T>1){E.empty();for(var b,e=0;e<T;e++){var d=i('<a rel="'+e+'"></a>').appendTo(E);if(a.settings.thumbnailOrientation=="horizontal"){b=d.outerWidth(true);d.css("left",e*b)}else{b=d.outerHeight(true);d.css("top",e*b)}d.bind({mouseover:function(){i(this).hasClass("select")||
i(this).addClass("over")},mouseout:function(){i(this).hasClass("select")||i(this).removeClass("over")},click:function(){var g=parseInt(i(this).attr("rel"));fa(g)}})}if(a.settings.thumbnailOrientation=="horizontal"){E.css("top",S*F);E.css("width",b*T);E.css("height",b);v.css("height",Math.max(v.height(),E.position().top+E.outerHeight(true)))}else{E.css("left",R*F);E.css("height",b*T);E.css("width",b);v.css("width",Math.max(v.width(),E.position().left+E.outerWidth(true)))}if(O>T-1)O=T-1;E.find("a").eq(O).addClass("select")}a.settings.thumbnailOrientation==
"horizontal"?E.css("left",(v.outerWidth()-E.outerWidth())/2):E.css("top",(v.outerHeight()-E.outerHeight())/2)}function wb(){if(O<T-1){O++;fa(O)}else fa(0)}function vb(){if(O>0){O--;fa(O)}else fa(T-1)}function fa(b){var e=a.settings.thumbnailOrientation=="horizontal"?I.width():I.height(),d=b*e;O=b;if(O==T-1)d=X-e;ab();P.animate(a.settings.thumbnailOrientation=="horizontal"?{left:-d}:{top:-d},{duration:a.settings.thumbnailScrollDuration,easing:a.settings.thumbnailScrollEasing,step:function(){Na()},
complete:function(){bb()}});if(a.settings.thumbnailButtons){e=v.find(".buttons");e.find(".select").removeClass("select");e.find("a").eq(b).removeClass("over").addClass("select")}}function gb(){xb=setInterval(function(){if(yb!=Wa){yb=Wa;if(Oa){clearTimeout(cb);Oa=false}if(db){db=false;if(a.settings.slideArrows&&a.settings.slideArrowsToggle)w?r.find(".slide-arrows a").stop().show():r.find(".slide-arrows a").stop().animate({opacity:1},a.settings.slideArrowsShowDuration);if(a.settings.slideshowControls&&
a.settings.slideshowControlsToggle)w?r.find(".slideshow-controls").stop().show():r.find(".slideshow-controls").stop().animate({opacity:1},a.settings.slideshowControlsShowDuration);if(a.settings.slideButtons&&a.settings.slideButtonsToggle)w?r.find(".slide-buttons").stop().show():r.find(".slide-buttons").stop().animate({opacity:1},a.settings.slideButtonsShowDuration)}}else if(!Oa){Oa=true;cb=setTimeout(function(){db=true;if(a.settings.slideArrows&&a.settings.slideArrowsToggle)w?r.find(".slide-arrows a").stop().hide():
r.find(".slide-arrows a").stop().animate({opacity:0},a.settings.slideArrowsHideDuration);if(a.settings.slideshowControls&&a.settings.slideshowControlsToggle)w?r.find(".slideshow-controls").stop().hide():r.find(".slideshow-controls").stop().animate({opacity:0},a.settings.slideshowControlsHideDuration);if(a.settings.slideButtons&&a.settings.slideButtonsToggle)w?r.find(".slide-buttons").stop().hide():r.find(".slide-buttons").stop().animate({opacity:0},a.settings.slideButtonsHideDuration)},a.settings.autoToggleDelay)}},
500)}function hb(){clearInterval(xb);clearTimeout(cb)}function wa(){a.settings.thumbnailMouseScroll=true;var b=0,e=false,d=I.offset().top,g=I.offset().left,h=I.width(),c=I.height(),f=a.settings.thumbnailOrientation=="horizontal"?h:c,j=a.settings.thumbnailOrientation=="horizontal"?g:d,t=a.settings.thumbnailOrientation=="horizontal"?"left":"top",l=parseInt(P.css(t));Pa=setInterval(function(){if(!e){e=true;d=I.offset().top;g=I.offset().left;h=I.width();c=I.height()}if($>g&&$<g+h&&aa>d&&aa<d+c){b=Math.round((-((X-
f+200)*(((a.settings.thumbnailOrientation=="horizontal"?$:aa)-j)/f))+100-l)*a.settings.thumbnailMouseScrollSpeed/100);l+=b}else if(Math.abs(b)>0.1){b*=a.settings.thumbnailMouseScrollEase/100;l+=b}else b=0;if(Math.abs(b)>0){if(l>=0)l=0;else if(l<=f-X)l=f-X;Na();P.css(t,l)}},30)}function tb(){a.settings.thumbnailMouseWheel=true;var b=0,e=a.settings.thumbnailMouseWheelReverse?-1:1,d,g=a.settings.thumbnailOrientation=="horizontal"?"left":"top",h=a.settings.thumbnailOrientation=="horizontal"?I.width():
I.height();I.bind("mousewheel",function(c,f){c.preventDefault();if(!Qa){ab();Qa=true;b=d=parseInt(P.css(g));Ra=setInterval(function(){if(Math.abs(b-d)>0.5){d+=(b-d)*(a.settings.thumbnailMouseWheelSpeed/100);Na();P.css(g,d)}else bb()},30)}b+=e*f*10;if(b>=0)b=0;else if(b<=h-X)b=h-X})}function Wb(){function b(){l=(a.settings.thumbnailOrientation=="horizontal"?$:aa)-ma.offset()[x]-p;e()}function e(){if(l<0)l=0;else if(l>parseInt(ma.css(o))-parseInt(t.css(o)))l=parseInt(ma.css(o))-parseInt(t.css(o));Aa&&
t.css(x,l);s=l/(parseInt(ma.css(o))-parseInt(t.css(o)));if(!Sa){ab();Sa=true;k=parseInt(P.css(x));eb=setInterval(function(){if(Math.abs(zb()+s)>0.0010){var B=(-s*(X-parseInt(I.css(o)))-k)*a.settings.thumbnailScrollbarEase/100;k+=B;Na();P.css(x,k)}else Sa&&bb()},30)}}D=i('<div class="scrollbar"></div>').appendTo(v);var d=i('<div class="back"></div>').appendTo(D),g=i('<div class="track"></div>').appendTo(D),h=i('<div class="forward"></div>').appendTo(D),c=i('<div class="track-middle"></div>').appendTo(g),
f=i('<div class="track-back"></div>').appendTo(g),j=i('<div class="track-forward"></div>').appendTo(g),t=i('<div class="thumb"></div>').appendTo(g);i('<div class="thumb-middle"></div>').appendTo(t);i('<div class="thumb-back"></div>').appendTo(t);i('<div class="thumb-forward"></div>').appendTo(t);var l=0,p,s=0,k=0,o=a.settings.thumbnailOrientation=="horizontal"?"width":"height",x=a.settings.thumbnailOrientation=="horizontal"?"left":"top";D.addClass(a.settings.scrollbarSkin);ma=g;if(a.settings.thumbnailOrientation==
"horizontal"){D.addClass("horizontal");D.css({top:S*F,left:(v.outerWidth()-D.width())/2});v.css("height",Math.max(v.height(),D.position().top+D.outerHeight(true)))}else{D.addClass("vertical");D.css({left:R*F,top:(v.outerHeight()-D.height())/2});v.css("width",Math.max(v.width(),D.position().left+D.outerWidth(true)))}if(d.width()==0&&h.width()==0){Ma=c;thumbnailScrollerScrollbarEdgeSize=a.settings.thumbnailOrientation=="horizontal"?f.width()+j.width():f.height()+j.height()}else{Ma=g;thumbnailScrollerScrollbarEdgeSize=
a.settings.thumbnailOrientation=="horizontal"?d.width()+h.width():d.height()+h.height()}if(a.settings.thumbnailScrollbarToggle){w?D.hide():D.css("opacity",0);v.hover(function(){w?D.show():D.stop().animate({opacity:1},a.settings.thumbnailScrollbarShowDuration)},function(){w?D.hide():D.stop().animate({opacity:0},a.settings.thumbnailScrollbarShowDuration)})}t.bind("mousedown",function(B){B.preventDefault();p=(a.settings.thumbnailOrientation=="horizontal"?$:aa)-t.offset()[x];Aa=true;i(document).bind("mousemove",
b)});i(document).bind("mouseup",function(){if(Aa){Aa=false;i(document).unbind("mousemove",b)}});d.bind("click",function(){l=parseInt(t.css(x))-a.settings.scrollbarArrowScrollAmount;e()});h.bind("click",function(){l=parseInt(t.css(x))+a.settings.scrollbarArrowScrollAmount;e()})}function zb(){var b=a.settings.thumbnailOrientation=="horizontal"?"width":"height";return parseFloat(P.css(a.settings.thumbnailOrientation=="horizontal"?"left":"top"))/(X-parseInt(I.css(b)))}function va(){Pa&&clearInterval(Pa);
if(Ra){Qa=false;clearInterval(Ra)}if(eb){Sa=false;clearInterval(eb)}}function ab(){va();P&&P.is(":animated")&&P.stop()}function bb(){va();a.settings.thumbnailMouseScroll&&wa()}function Na(){if(a.settings.thumbnailScrollbar&&!Aa){var b=ma.find(".thumb"),e=a.settings.thumbnailOrientation=="horizontal"?"left":"top",d=a.settings.thumbnailOrientation=="horizontal"?"width":"height";d=parseInt(ma.css(d))-parseInt(b.css(d));var g=-zb()*d;g>=0&&g<=d&&b.css(e,g)}}function Tb(b){b=v.find(".thumbnail").eq(b);
var e=b.attr("title");if(e){var d=i("body").find(".tooltip");b.removeAttr("title");d.find(".content").html(e);var g=d.outerWidth()/2,h=d.outerHeight()+parseInt(d.css("marginBottom"));d.css({left:$,top:aa});d.stop(false,true).fadeIn(a.settings.tooltipShowDuration);i(document).bind("mousemove.tooltip",function(){d.css({left:$-g,top:aa-h})})}}function Ub(b){var e=i("body").find(".tooltip"),d=e.find(".content").html();b=v.find(".thumbnail").eq(b);if(d){b.attr("title",d);e&&e.stop(false,true).fadeOut(a.settings.tooltipHideDuration,
function(){i(document).unbind("mousemove.tooltip");e.css("left",-9999)})}}function Pb(b,e,d,g){var h=[],c,f,j=0;switch(e){case "randomPattern":for(d=[];b.length;){j=Math.floor(Math.random()*b.length);d.push(b[j]);b.splice(j,1)}var t=d.length;for(e=0;e<t;e++)h[e]=d[e];break;case "topToBottom":for(f=0;f<g;f++)for(c=0;c<d;c++)h.push(n(b,c,f));break;case "bottomToTop":for(f=g-1;f>=0;f--)for(c=d-1;c>=0;c--)h.push(n(b,c,f));break;case "rightToLeft":for(c=d-1;c>=0;c--)for(f=g-1;f>=0;f--)h.push(n(b,c,f));
break;case "leftToRight":for(c=0;c<d;c++)for(f=0;f<g;f++)h.push(n(b,c,f));break;case "topLeftToBottomRight":for(e=0;e<d+g-1;e++){f=0;for(c=e;c>=0;c--){n(b,c,f)!=undefined&&h.push(n(b,c,f));f++}}break;case "bottomLeftToTopRight":j=d>g?d:g;for(e=d-1;e>=1-j;e--){c=0;for(f=e;f<=d-1;f++){n(b,c,f)!=undefined&&h.push(n(b,c,f));c++}}break;case "topRightToBottomLeft":j=d>g?d:g;for(e=d-1;e>=1-j;e--){c=e;for(f=0;f<=g-1;f++){n(b,c,f)!=undefined&&h.push(n(b,c,f));c++}}break;case "bottomRightToTopLeft":for(e=g+
d-2;e>=0;e--){f=0;for(c=e;c>=0;c--){n(b,c,f)!=undefined&&h.push(n(b,c,f));f++}}break;case "horizontalMarginToCenter":if(d%2){for(c=0;c<Math.floor(d/2);c++)for(f=0;f<g;f++){h.push(n(b,c,f));h.push(n(b,d-1-c,f))}for(e=0;e<g;e++)h.push(n(b,Math.floor(d/2),e))}else for(c=0;c<Math.floor(d/2);c++)for(f=0;f<g;f++){h.push(n(b,c,f));h.push(n(b,d-1-c,f))}break;case "horizontalCenterToMargin":if(d%2)for(e=0;e<g;e++)h.push(n(b,Math.floor(d/2),e));for(c=Math.floor(d/2)-1;c>=0;c--)for(f=0;f<g;f++){h.push(n(b,c,
f));h.push(n(b,d-1-c,f))}break;case "verticalMarginToCenter":if(g%2){for(f=0;f<Math.floor(g/2);f++)for(c=0;c<d;c++){h.push(n(b,c,f));h.push(n(b,c,g-1-f))}for(e=0;e<d;e++)h.push(n(b,e,Math.floor(g/2)))}else for(f=0;f<Math.floor(g/2);f++)for(c=0;c<d;c++){h.push(n(b,c,f));h.push(n(b,c,g-1-f))}break;case "verticalCenterToMargin":if(g%2)for(e=0;e<d;e++)h.push(n(b,e,Math.floor(g/2)));for(f=Math.floor(g/2)-1;f>=0;f--)for(c=0;c<d;c++){h.push(n(b,c,f));h.push(n(b,c,g-1-f))}break;case "skipOneTopToBottom":for(f=
0;f<g;f++){for(c=j;c<d;c+=2)h.push(n(b,c,f));j==0?j=1:j=0}j=1;for(f=0;f<g;f++){for(c=j;c<d;c+=2)h.push(n(b,c,f));j==0?j=1:j=0}break;case "skipOneBottomToTop":for(f=g-1;f>=0;f--){for(c=j;c<d;c+=2)h.push(n(b,c,f));j==0?j=1:j=0}j=1;for(f=g-1;f>=0;f--){for(c=j;c<d;c+=2)h.push(n(b,c,f));j==0?j=1:j=0}break;case "skipOneLeftToRight":for(c=0;c<d;c++){for(f=j;f<g;f+=2)h.push(n(b,c,f));j==0?j=1:j=0}j=1;for(c=0;c<d;c++){for(f=j;f<g;f+=2)h.push(n(b,c,f));j==0?j=1:j=0}break;case "skipOneRightToLeft":for(c=d-1;c>=
0;c--){for(f=j;f<g;f+=2)h.push(n(b,c,f));j==0?j=1:j=0}j=1;for(c=d-1;c>=0;c--){for(f=j;f<g;f+=2)h.push(n(b,c,f));j==0?j=1:j=0}break;case "skipOneVertical":if(g%2)for(f=0;f<g;f++){for(c=j;c<d;c+=2){if(f==Math.floor(g/2)){f++;for(e=1-d%2;e<d;e+=2){h.push(n(b,e,Math.floor(g/2)));n(b,e-1,Math.floor(g/2))!=undefined&&h.push(n(b,e-1,Math.floor(g/2)))}}h.push(n(b,c,f));h.push(n(b,c,g-f-1))}j==0?j=1:j=0}else for(f=0;f<g;f++){for(c=j;c<d;c+=2){h.push(n(b,c,f));h.push(n(b,c,g-f-1))}j==0?j=1:j=0}break;case "skipOneHorizontal":if(d%
2)for(c=0;c<d;c++){for(f=j;f<g;f+=2){if(c==Math.floor(d/2)){c++;for(e=1-g%2;e<g;e+=2){h.push(n(b,Math.floor(d/2),e));n(b,Math.floor(d/2),e-1)!=undefined&&h.push(n(b,Math.floor(d/2),e-1))}}h.push(n(b,c,f));h.push(n(b,d-1-c,f))}j==0?j=1:j=0}else for(c=0;c<d;c++){for(f=j;f<g;f+=2){h.push(n(b,c,f));h.push(n(b,d-1-c,f))}j==0?j=1:j=0}break;case "spiralMarginToCenterCW":var l=d,p=g,s,k=0,o=g<d?g:d;t=Math.floor(o/2);for(s=0;s<t;s++){for(c=k++;c<l;c++)h.push(n(b,c,k-1));l--;for(f=k;f<p;f++)h.push(n(b,d-k,
f));p--;for(e=l;e>=d-l;e--)h.push(n(b,e-1,p));for(j=p-1;j>=g-p;j--)h.push(n(b,k-1,j))}if(o%2){if(o==g)for(c=k++;c<l;c++)h.push(n(b,c,k-1));if(o==d)for(f=k++;f<p;f++)h.push(n(b,d-k,f))}break;case "spiralMarginToCenterCCW":l=d;p=g;k=0;o=g<d?g:d;t=Math.floor(o/2);for(s=0;s<t;s++){for(f=k++;f<p;f++)h.push(n(b,k-1,f));p--;for(c=k;c<l;c++)h.push(n(b,c,g-k));l--;for(e=p;e>=g-p;e--)h.push(n(b,l,e-1));for(j=l-1;j>=d-l;j--)h.push(n(b,j,k-1))}if(o%2){if(o==g)for(c=k++;c<l;c++)h.push(n(b,c,g-k));if(o==d)for(f=
k++;f<p;f++)h.push(n(b,k-1,f))}break;case "spiralCenterToMarginCCW":l=d;p=g;k=0;o=g<d?g:d;t=Math.floor(o/2);for(s=0;s<t;s++){for(c=k++;c<l;c++)h.push(n(b,c,k-1));l--;for(f=k;f<p;f++)h.push(n(b,d-k,f));p--;for(e=l;e>=d-l;e--)h.push(n(b,e-1,p));for(j=p-1;j>=g-p;j--)h.push(n(b,k-1,j))}if(o%2){if(o==g)for(c=k++;c<l;c++)h.push(n(b,c,k-1));if(o==d)for(f=k++;f<p;f++)h.push(n(b,d-k,f))}h.reverse();break;case "spiralCenterToMarginCW":l=d;p=g;k=0;o=g<d?g:d;t=Math.floor(o/2);for(s=0;s<t;s++){for(f=k++;f<p;f++)h.push(n(b,
k-1,f));p--;for(c=k;c<l;c++)h.push(n(b,c,g-k));l--;for(e=p;e>=g-p;e--)h.push(n(b,l,e-1));for(j=l-1;j>=d-l;j--)h.push(n(b,j,k-1))}if(o%2){if(o==g)for(c=k++;c<l;c++)h.push(n(b,c,g-k));if(o==d)for(f=k++;f<p;f++)h.push(n(b,k-1,f))}h.reverse();break;default:for(d=[];b.length;){j=Math.floor(Math.random()*b.length);d.push(b[j]);b.splice(j,1)}t=d.length;for(e=0;e<t;e++)h[e]=d[e]}return h}function n(b,e,d){return i.grep(b,function(g){return g.data("hPos")==e&&g.data("vPos")==d})[0]}function ra(b){return b[Math.floor(Math.random()*
b.length)]}function za(b){return isNaN(b)?b:parseInt(b)}function sa(b){var e=parseInt(b.substring(1,3),16),d=parseInt(b.substring(3,5),16);b=parseInt(b.substring(5,7),16);return{red:e,green:d,blue:b}}this.settings=i.extend({},i.fn.advancedSlider.defaults,U);var r=i(Ta),a=this,q=-1,C=-1,ea=-1,y=[],A=[],G=0,pa=0,ka=null,L=false,Z=false,ua=false,na=false,ha=false,Ua=false,J=false,W=0,$a=0,N,Ka=0,La=0,Q=0,V=0,ub=0,X,v,I,P,R,S,ba,E,D,ma,Ma,O=0,T=0,F=0,Pa,Ra,Qa=false,eb,Aa=false,Sa=false,$,aa,yb=0,Wa=0,
xb,cb=0,Oa=false,db=false,pb=true,ia="",ya=0,xa=null,K,m,u,jb,kb,ib=0,Ia,nb,w=i.browser.msie&&parseInt(i.browser.version)<9,Cb=navigator.userAgent.match(/iPad/i)!=null||navigator.userAgent.match(/iPod/i)!=null||navigator.userAgent.match(/iPhone/i)!=null,ta=false,Ba=["alignType","effectType","sliceEffectType","sliceDelay","sliceDuration","sliceEasing","horizontalSlices","verticalSlices","slicePattern","slicePoint","sliceStartPosition","sliceStartRatio","sliceFade","captionSize","captionPosition","captionShowEffectDuration",
"captionShowEffectEasing","captionHideEffectDuration","captionHideEffectEasing","captionShowEffect","captionHideEffect","captionLeft","captionTop","captionWidth","captionHeight","captionShowSlideDirection","captionHideSlideDirection","captionBackgroundColor","captionBackgroundOpacity","slideshowDelay","slideMask","slideDirection","slideDuration","slideEasing","slideLoop","fadeInDuration","fadeOutDuration","fadeInEasing","fadeOutEasing","fadePreviousSlide","fadePreviousSlideDuration","thumbnailType",
"captionDelay","htmlDuringTransition"];(function(){if(a.settings.xmlSource){r.empty();i.ajax({type:"GET",url:a.settings.xmlSource,dataType:i.browser.msie?"text":"xml",success:function(b){var e,d;if(i.browser.msie){e=new ActiveXObject("Microsoft.XMLDOM");e.async=false;e.loadXML(b)}else e=b;u=i('<ul class="slides"></ul>').appendTo(r);d=i(e).find("slider");i(e).find("slide").each(function(g){var h=i('<li class="slide"></li>').appendTo(u),c=i(this),f=c.find("image"),j=c.find("thumbnail"),t=c.find("caption"),
l=c.find("html"),p=c.find("link"),s=c.find("thumbnailLink"),k=f.length||c.attr("data-image"),o,x;c.attr("data-image")&&h.attr("data-image",c.attr("data-image"));if(k&&p.length)o=i("<a></a>").attr("href",p.text()).attr("title",p.attr("title")?p.attr("title"):"").attr("target",p.attr("target")?p.attr("target"):"_self").attr("rel",(p.attr("type")=="slider-lightbox"?p.attr("type"):"")+(p.attr("group")?"["+p.attr("group")+"]":"")).appendTo(h);if(f.length)i("<img/>").attr("src",f.text()).attr("class","image").attr("alt",
f.attr("alt")?f.attr("alt"):"").attr("title",f.attr("title")?f.attr("title"):"").appendTo(o?o:h);if(j.length&&s.length)x=i("<a></a>").attr("href",s.text()).attr("title",s.attr("title")?s.attr("title"):"").attr("target",s.attr("target")?s.attr("target"):"_self").attr("rel",(s.attr("type")=="slider-lightbox"?s.attr("type"):"")+(s.attr("group")?"["+s.attr("group")+"]":"")).appendTo(h);if(j.length)i("<img/>").attr("src",j.text()).attr("class","thumbnail").attr("alt",j.attr("alt")?j.attr("alt"):"").attr("title",
j.attr("title")?j.attr("title"):"").appendTo(x?x:h);if(t.length)i("<div></div>").html(t.text()).attr("class","caption").appendTo(t.attr("parent")=="link"&&o?o:h);l.length&&i("<div></div>").html(l.text()).attr("class","html").appendTo(h);h.properties={};for(c=0;c<Ba.length;c++){f=Ba[c];h.properties[f]=U.slideProperties&&U.slideProperties[g]&&U.slideProperties[g][f]?U.slideProperties[g][f]:i(this).attr(f)?i(this).attr(f):U[f]?U[f]:d.attr(f)?d.attr(f):i.fn.advancedSlider.defaults[f]}y.push(h)});Y();
b={type:"xmlLoaded",data:e};i.isFunction(a.settings.xmlLoaded)&&a.settings.xmlLoaded.call(this,b)}})}else Y()})();this.nextSlide=da;this.previousSlide=ja;this.gotoSlide=qa;this.startSlideshow=mb;this.stopSlideshow=Ca;this.pauseSlideshow=ga;this.resumeSlideshow=oa;this.scrollToThumbnailPage=fa;this.scrollToNextThumbnailPage=wb;this.scrollToPreviousThumbnailPage=vb;this.startThumbnailMouseScroll=wa;this.stopThumbnailMouseScroll=function(){a.settings.thumbnailMouseScroll=false;clearInterval(Pa)};this.startThumbnailMouseWheel=
tb;this.stopThumbnailMouseWheel=function(){Qa=a.settings.thumbnailMouseWheel=false;clearInterval(Ra)};this.startAutoToggle=gb;this.stopAutoToggle=hb;this.doSliderLayout=Xa;this.getSlideshowState=function(){return N};this.getCurrentIndex=function(){return q};this.getSlideAt=function(b){return y[b]};this.getTriggerType=function(){return ia};this.isTransition=function(){return L};this.totalSlides=function(){return G};this.getSize=function(){return{sliderWidth:r.width(),sliderHeight:r.height(),slideWidth:m.width(),
slideHeight:m.height()}};this.destroy=function(){Ca();va();i(document).unbind("mousemove");i(document).unbind("mousemove.tooltip")}}i.fn.advancedSlider=function(Ta){for(var U=[],Y=0;Y<this.length;Y++){if(!this[Y].advancedslider)this[Y].advancedslider=new Ab(this[Y],Ta);U.push(this[Y].advancedslider)}return U.length>1?U:U[0]};i.fn.advancedSlider.defaults={xmlSource:null,width:500,height:300,aspectRatio:-1,skin:"pixel",scrollbarSkin:"scrollbar-1",shadow:true,alignType:"centerCenter",scaleType:"outsideFit",
allowScaleUp:false,preloadNearbyImages:false,slideStart:0,shuffle:false,slideshow:true,slideshowDelay:5E3,slideshowDirection:"next",slideshowLoop:true,slideshowControls:false,slideshowControlsToggle:true,slideshowControlsShowDuration:500,slideshowControlsHideDuration:500,pauseSlideshowOnHover:false,slideArrows:true,slideArrowsToggle:true,slideArrowsShowDuration:500,slideArrowsHideDuration:500,slideButtons:true,slideButtonsNumber:false,slideButtonsToggle:false,slideButtonsShowDuration:500,slideButtonsHideDuration:500,
slideButtonsCenter:true,slideButtonsContainerCenter:true,keyboardNavigation:false,keyboardNavigationOnFocusOnly:false,autoToggle:false,autoToggleDelay:5E3,timerAnimation:true,timerAnimationControls:true,timerFadeDuration:500,timerToggle:false,timerRadius:18,timerStrokeColor1:"#000000",timerStrokeColor2:"#FFFFFF",timerStrokeOpacity1:0.5,timerStrokeOpacity2:0.7,timerStrokeWidth1:8,timerStrokeWidth2:4,lightbox:false,lightboxTheme:"pp_default",lightboxOpacity:0.8,lightboxIcon:true,lightboxIconToggle:false,
lightboxIconFadeDuration:500,thumbnailLightboxIcon:true,thumbnailLightboxIconToggle:true,htmlDuringTransition:true,overrideTransition:false,initialEffect:true,effectType:"random",sliceEffectType:"random",sliceDelay:50,sliceDuration:1E3,sliceEasing:"swing",horizontalSlices:5,verticalSlices:3,slicePattern:"random",slicePoint:"centerCenter",sliceStartPosition:"left",sliceStartRatio:1,slideMask:false,sliceFade:true,fadePreviousSlide:false,fadePreviousSlideDuration:300,slideDirection:"autoHorizontal",
slideLoop:false,slideDuration:700,slideEasing:"swing",fadeInDuration:700,fadeOutDuration:700,fadeInEasing:"swing",fadeOutEasing:"swing",swipeOrientation:"horizontal",swipeDuration:700,swipeBackDuration:300,swipeSlideDistance:10,swipeEasing:"swing",swipeMouseDrag:true,swipeTouchDrag:true,swipeGrabCursor:true,swipeThreshold:50,thumbnailType:"tooltip",thumbnailWidth:80,thumbnailHeight:50,thumbnailSlideAmount:10,thumbnailSlideDuration:300,thumbnailSlideEasing:"swing",thumbnailScrollerToggle:false,thumbnailScrollerResponsive:false,
thumbnailScrollerCenter:true,thumbnailScrollerOverlay:false,thumbnailScrollDuration:1E3,thumbnailScrollEasing:"swing",maximumVisibleThumbnails:5,minimumVisibleThumbnails:1,thumbnailOrientation:"horizontal",thumbnailLayers:1,thumbnailTooltip:false,tooltipShowDuration:300,tooltipHideDuration:300,thumbnailCaptionPosition:"bottom",thumbnailCaptionToggle:true,thumbnailCaptionEffect:"slide",thumbnailCaptionShowDuration:500,thumbnailCaptionHideDuration:500,thumbnailCaptionEasing:"swing",thumbnailScrollbar:false,
thumbnailButtons:false,thumbnailArrows:true,thumbnailButtonsToggle:false,thumbnailArrowsToggle:false,thumbnailScrollbarToggle:false,scrollbarArrowScrollAmount:100,thumbnailScrollerHideDuration:500,thumbnailScrollerShowDuration:500,thumbnailArrowsHideDuration:500,thumbnailArrowsShowDuration:500,thumbnailButtonsHideDuration:500,thumbnailButtonsShowDuration:500,thumbnailScrollbarHideDuration:500,thumbnailScrollbarShowDuration:500,thumbnailSync:true,thumbnailMouseScroll:false,thumbnailMouseScrollEase:90,
thumbnailMouseScrollSpeed:10,thumbnailMouseWheel:false,thumbnailMouseWheelSpeed:20,thumbnailMouseWheelReverse:false,thumbnailScrollbarEase:10,captionToggle:false,captionDelay:0,captionSize:70,captionBackgroundOpacity:0.5,captionBackgroundColor:"#000000",captionShowEffect:"slide",captionShowEffectDuration:500,captionShowEffectEasing:"swing",captionShowSlideDirection:"auto",captionHideEffect:"fade",captionHideEffectDuration:300,captionHideEffectEasing:"swing",captionHideSlideDirection:"auto",captionPosition:"bottom",
captionLeft:50,captionTop:50,captionWidth:300,captionHeight:100,videoPlayAction:"stopSlideshow",videoPauseAction:"none",videoEndAction:"startSlideshow",reachVideoAction:"none",leaveVideoAction:"pauseVideo",slideProperties:null,slideOpen:null,slideClick:null,slideMouseOver:null,slideMouseOut:null,thumbnailClick:null,thumbnailMouseOver:null,thumbnailMouseOut:null,transitionStart:null,transitionComplete:null,xmlLoaded:null,doSliderLayout:null}})(jQuery);
